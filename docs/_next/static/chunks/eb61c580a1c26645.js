(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50086,e=>{"use strict";var t=e.i(43476),r=e.i(57688),n=e.i(22016),i=e.i(71645);function o({game:e,index:o=0}){let[a,s]=(0,i.useState)(!1),l=(0,i.useRef)(null);return(0,t.jsx)(n.default,{href:`/game/${e.slug}`,className:"group block animate-slide-up",style:{animationDelay:`${80*o}ms`,animationFillMode:"both"},onMouseEnter:()=>{s(!0),l.current&&l.current.play().catch(()=>{})},onMouseLeave:()=>{s(!1),l.current&&(l.current.pause(),l.current.currentTime=0)},children:(0,t.jsxs)("div",{className:`relative aspect-video rounded-2xl overflow-hidden transition-all duration-200 border-2 ${a?"border-accent shadow-[0_8px_40px_rgba(124,58,237,0.2)] scale-[1.03]":"border-transparent"}`,children:[(0,t.jsx)(r.default,{src:e.coverUrl,alt:e.title,fill:!0,className:`object-cover transition-opacity duration-150 ${a&&e.previewVideoUrl?"opacity-0":"opacity-100"}`,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"}),e.previewVideoUrl&&(0,t.jsx)("video",{ref:l,src:e.previewVideoUrl,muted:!0,loop:!0,playsInline:!0,preload:"none",className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-150 ${a?"opacity-100":"opacity-0"}`}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 px-2.5 py-2 bg-gradient-to-t from-black/60 to-transparent",children:(0,t.jsx)("h3",{className:"text-xs font-medium text-white/90 truncate drop-shadow-lg",children:e.title})})]})})}e.s(["default",()=>o])},18757,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useCanvasIdentifier=void 0;var n=e.r(71645);r.useCanvasIdentifier=function(e){var t=(0,n.useState)(0),r=t[0],i=t[1],o=(0,n.useCallback)(function(){i(function(e){return e+1})},[]);return void 0!==e?[e,o]:[(0,n.useMemo)(function(){return"react-unity-webgl-canvas-0"},[r]),o]}},44944,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowserEnvironment=void 0,r.isBrowserEnvironment="u">typeof window&&"u">typeof document},65662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useUnityLoader=void 0;var n=e.r(71645),i=e.r(44944);r.useUnityLoader=function(e){var t=(0,n.useState)("Loading"),r=t[0],o=t[1];return(0,n.useEffect)(function(){if(!1!==i.isBrowserEnvironment){if(null===e)return void o("Idle");var t=window.document.querySelector('script[src="'.concat(e,'"]'));null===t?((t=window.document.createElement("script")).type="text/javascript",t.src=e,t.async=!0,t.setAttribute("data-status","loading"),window.document.body.appendChild(t),t.addEventListener("load",function(){return null==t?void 0:t.setAttribute("data-status","loaded")}),t.addEventListener("error",function(){return null==t?void 0:t.setAttribute("data-status","error")})):o("loaded"===t.getAttribute("data-status")?"Loaded":"Error");var r=function(e){return o("load"===e.type?"Loaded":"Error")};return t.addEventListener("load",r),t.addEventListener("error",r),function(){null!==t&&(t.removeEventListener("load",r),t.removeEventListener("error",r),t.remove())}}},[e]),r}},73345,(e,t,r)=>{"use strict";var n=e.e&&e.e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=e.e&&e.e.__generator||function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var u=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Unity=void 0;var o=e.r(71645),a=e.r(18757),s=e.r(65662);r.Unity=(0,o.forwardRef)(function(e,t){var r=(0,o.useState)(null),l=r[0],u=r[1],c=(0,o.useState)(null),d=c[0],v=c[1],f=(0,a.useCanvasIdentifier)(e.id),y=f[0],m=f[1],b=(0,s.useUnityLoader)(e.unityProvider.loaderUrl),p=(0,o.useCallback)(function(t){e.unityProvider.setLoadingProgression(t),1===t&&e.unityProvider.setIsLoaded(!0)},[e.unityProvider]);return(0,o.useEffect)(function(){return n(void 0,void 0,void 0,function(){var t,r,n,o,a;return i(this,function(i){switch(i.label){case 0:if(!l||d||"Loaded"!==b)return[2];console.log("React Unity WebGL: Initializing Unity instance..."),e.unityProvider.setUnityInstance(null),v(null),e.unityProvider.setLoadingProgression(0),null==(a=(o=e.unityProvider).setIsLoaded)||a.call(o,!1),e.unityProvider.setInitialisationError(void 0),m(),Object.keys(t={companyName:e.unityProvider.companyName,productName:e.unityProvider.productName,productVersion:e.unityProvider.productVersion,dataUrl:e.unityProvider.dataUrl,frameworkUrl:e.unityProvider.frameworkUrl,codeUrl:e.unityProvider.codeUrl,workerUrl:e.unityProvider.workerUrl,memoryUrl:e.unityProvider.memoryUrl,symbolsUrl:e.unityProvider.symbolsUrl,streamingAssetsUrl:e.unityProvider.streamingAssetsUrl,devicePixelRatio:e.devicePixelRatio,webglContextAttributes:e.unityProvider.webglContextAttributes,cacheControl:e.unityProvider.cacheControl,autoSyncPersistentDataPath:e.unityProvider.autoSyncPersistentDataPath,matchWebGLToCanvasSize:e.matchWebGLToCanvasSize,disabledCanvasEvents:e.disabledCanvasEvents}).forEach(function(e){(null===t[e]||void 0===t[e])&&delete t[e]}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,window.createUnityInstance(l,t,p)];case 2:return v(r=i.sent()),e.unityProvider.setUnityInstance(r),[3,4];case 3:return console.error("React Unity WebGL: Error initializing Unity instance:",n=i.sent()),e.unityProvider.setInitialisationError(n),[3,4];case 4:return[2]}})}),function(){n(void 0,void 0,void 0,function(){var t,r,n;return i(this,function(i){switch(i.label){case 0:if(!d||!l)return[2];return console.log("React Unity WebGL: Detaching Unity instance..."),e.unityProvider.setUnityInstance(null),v(null),e.unityProvider.setLoadingProgression(0),null==(n=(r=e.unityProvider).setIsLoaded)||n.call(r,!1),e.unityProvider.setInitialisationError(void 0),(t=document.createElement("canvas")).id=l.id,t.setAttribute("react-unity-webgl-role","cleanup"),t.style.display="none",document.body.appendChild(t),d.Module.canvas=t,v(null),[4,d.Quit()];case 1:return i.sent(),document.body.removeChild(t),[2]}})})}},[l,d,b,e.unityProvider]),(0,o.useImperativeHandle)(t,function(){return l}),(0,o.createElement)("canvas",{ref:u,id:y,style:e.style,className:e.className,tabIndex:e.tabIndex})})},41885,(e,t,r)=>{"use strict";var n=e.e&&e.e.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.useEventSystem=void 0;var i=e.r(71645),o=e.r(44944),a=[];!0===o.isBrowserEnvironment&&(window.dispatchReactUnityEvent=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=void 0;return a.forEach(function(r){i=r.apply(void 0,n([e],t,!1))}),i}),r.useEventSystem=function(){var e=(0,i.useRef)([]),t=(0,i.useCallback)(function(t,r){e.current=n(n([],e.current,!0),[{eventName:t,callback:r}],!1)},[e]),r=(0,i.useCallback)(function(t,r){e.current=e.current.filter(function(e){return e.eventName!==t&&e.callback!==r})},[e]),o=(0,i.useCallback)(function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.current.find(function(e){return e.eventName===t});if(void 0!==i)return i.callback.apply(i,r)},[e]);return(0,i.useEffect)(function(){return a.push(o),function(){a.splice(a.indexOf(o),1)}},[o]),{addEventListener:t,removeEventListener:r}}},67509,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useUnityContext=void 0;var n=e.r(71645),i=e.r(41885);r.useUnityContext=function(e){var t=(0,n.useState)(null),r=t[0],o=t[1],a=(0,n.useState)(0),s=a[0],l=a[1],u=(0,n.useState)(!1),c=u[0],d=u[1],v=(0,n.useState)(),f=v[0],y=v[1],m=(0,i.useEventSystem)(),b=(0,n.useRef)({companyName:e.companyName,productName:e.productName,productVersion:e.productVersion,codeUrl:e.codeUrl,dataUrl:e.dataUrl,frameworkUrl:e.frameworkUrl,loaderUrl:e.loaderUrl,memoryUrl:e.memoryUrl,symbolsUrl:e.symbolsUrl,streamingAssetsUrl:e.streamingAssetsUrl,workerUrl:e.workerUrl,webglContextAttributes:e.webglContextAttributes,cacheControl:e.cacheControl,autoSyncPersistentDataPath:e.autoSyncPersistentDataPath,setUnityInstance:o,setLoadingProgression:l,setIsLoaded:d,setInitialisationError:y}),p=(0,n.useCallback)(function(e){return null==r?void 0:r.SetFullscreen(+!!e)},[r]),h=(0,n.useCallback)(function(){var e;return null==(e=null==r?void 0:r.Module.canvas)?void 0:e.requestPointerLock()},[r]),x=(0,n.useCallback)(function(e,t,n){return null==r?void 0:r.SendMessage(e,t,n)},[r]),w=(0,n.useCallback)(function(e,t){var n;return null==(n=null==r?void 0:r.Module.canvas)?void 0:n.toDataURL(e,t)},[r]),g=(0,n.useCallback)(function(){var e;return null!=(e=null==r?void 0:r.Quit())?e:Promise.reject()},[r]),U=(0,n.useCallback)(function(){var e;return null==(e=null==r?void 0:r.GetMetricsInfo)?void 0:e.call(r)},[r]);return{unityProvider:b.current,loadingProgression:s,isLoaded:c,initialisationError:f,requestFullscreen:p,requestPointerLock:h,sendMessage:x,takeScreenshot:w,unload:g,getMetricsInfo:U,addEventListener:m.addEventListener,removeEventListener:m.removeEventListener,UNSAFE__unityInstance:r}}},45075,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useUnityMetricsInfo=void 0;var n=e.r(71645);r.useUnityMetricsInfo=function(e,t){var r=(0,n.useState)({}),i=r[0],o=r[1];return(0,n.useEffect)(function(){var r=setInterval(function(){var t=e();void 0!==t&&o(t)},t.interval||1e3);return function(){clearInterval(r)}},[e,t.interval]),i}},64812,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useUnityMetricsInfo=r.useUnityContext=r.Unity=void 0;var n=e.r(73345);Object.defineProperty(r,"Unity",{enumerable:!0,get:function(){return n.Unity}});var i=e.r(67509);Object.defineProperty(r,"useUnityContext",{enumerable:!0,get:function(){return i.useUnityContext}});var o=e.r(45075);Object.defineProperty(r,"useUnityMetricsInfo",{enumerable:!0,get:function(){return o.useUnityMetricsInfo}})},73909,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(64812),i=e.i(86437);function o({buildFolder:e,buildName:o,title:a,coverUrl:s,previewVideoUrl:l,slug:u,orientation:c}){let[d,v]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[m,b]=(0,r.useState)(!1),p=(0,r.useRef)(null),h=(0,r.useRef)(null),[x,w]=(0,r.useState)(!1),{unityProvider:g,loadingProgression:U,isLoaded:j,requestFullscreen:P}=(0,n.useUnityContext)({loaderUrl:`${e}/${o}.loader.js`,dataUrl:`${e}/${o}.data`,frameworkUrl:`${e}/${o}.framework.js`,codeUrl:`${e}/${o}.wasm`}),k=Math.round(100*U);(0,r.useEffect)(()=>{if(!d||!c||!j)return;let e=()=>{let e=window.innerWidth>window.innerHeight;w("landscape"===c&&!e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d,c,j]);let E=(0,r.useCallback)(()=>{if(!h.current)return;let e=h.current,t=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen;t&&t.call(e).catch(e=>{console.error("Fullscreen failed:",e);try{P(!0)}catch(e){console.error("Unity fallback failed:",e)}})},[P]);return(0,r.useEffect)(()=>{!d&&p.current&&p.current.play().catch(()=>{})},[d]),(0,r.useEffect)(()=>{let e=()=>{b(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{ref:h,className:`relative overflow-hidden bg-card group/player ${m?"fixed inset-0 z-50 w-screen h-screen border-none rounded-none flex items-center justify-center bg-black":"rounded-2xl border border-border"}`,children:[x&&(0,t.jsxs)("div",{className:"absolute inset-0 z-50 bg-black/90 flex flex-col items-center justify-center text-center p-6 animate-fade-in",children:[(0,t.jsx)("div",{className:"w-16 h-16 mb-4 animate-spin-slow",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})})}),(0,t.jsx)("h3",{className:"text-white text-xl font-bold mb-2",children:"Поверните устройство"}),(0,t.jsx)("p",{className:"text-gray-300",children:"Для этой игры требуется горизонтальная ориентация"})]}),!d&&(0,t.jsxs)("div",{className:"relative aspect-video cursor-pointer",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),onClick:()=>{v(!0),(0,i.reachGoal)("play_game",{slug:u||a}),window.innerWidth<1024&&setTimeout(()=>{E(),c&&screen.orientation&&"lock"in screen.orientation&&screen.orientation.lock(c).catch(()=>{})},100)},children:[l&&(0,t.jsx)("video",{ref:p,src:l,muted:!0,loop:!0,playsInline:!0,autoPlay:!0,className:"absolute inset-0 w-full h-full object-cover blur-md scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/15"}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center gap-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-accent/90 backdrop-blur-sm flex items-center justify-center shadow-xl transition-all duration-300 hover:scale-110 hover:bg-accent animate-glow-pulse",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"white",className:"w-8 h-8 ml-1",children:(0,t.jsx)("polygon",{points:"6,3 20,12 6,21"})})}),(0,t.jsx)("span",{className:"text-white text-lg font-bold drop-shadow-lg",children:"Играть"})]})]}),d&&(0,t.jsxs)(t.Fragment,{children:[!j&&(0,t.jsxs)("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-card/95 backdrop-blur-sm",children:[(0,t.jsxs)("p",{className:"text-text-muted text-sm mb-4 font-medium",children:["Загрузка ",a,"..."]}),(0,t.jsx)("div",{className:"w-64 h-2 bg-background-secondary rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full rounded-full transition-all duration-300 animate-glow-pulse",style:{width:`${k}%`,background:"linear-gradient(90deg, var(--accent), var(--accent-pink))"}})}),(0,t.jsxs)("p",{className:"mt-3 text-2xl font-bold gradient-text",children:[k,"%"]})]}),(0,t.jsx)(n.Unity,{unityProvider:g,className:`block ${m?"w-full h-full":"w-full aspect-video"}`,tabIndex:1,style:{background:"var(--background)"}}),j&&!m&&(0,t.jsx)("button",{onClick:E,className:"absolute bottom-4 right-4 z-40 w-10 h-10 rounded-xl glass flex items-center justify-center text-text-muted hover:text-text hover:bg-accent/20 transition-all duration-200 group opacity-0 group-hover/player:opacity-100 md:opacity-100",title:"На весь экран",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200",children:[(0,t.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),(0,t.jsx)("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),(0,t.jsx)("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),(0,t.jsx)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]})})]})]})})}function a({game:e}){return(0,t.jsx)(o,{buildFolder:e.buildFolder,buildName:e.buildName,title:e.title,coverUrl:e.coverUrl,previewVideoUrl:e.previewVideoUrl,slug:e.slug,orientation:e.orientation})}e.s(["default",()=>a],73909)}]);